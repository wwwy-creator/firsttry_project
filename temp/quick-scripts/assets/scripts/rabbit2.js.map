{"version":3,"sources":["rabbit2.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","height","duration","mutiplynum","jumpAudio","default","type","AudioClip","playJumpSound","audioEngine","playEffect","setJumpAction","callback","callFunc","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","repeatForever","sequence","setOneJumpAction","timer","clickJump","event","flag","node","pauseSystemEvents","scheduleOnce","resumeSystemEvents","stopAllActions","setPosition","runAction","onLoad","on","onDestroy","off"],"mappings":"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","file":"rabbit2.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // ������Ծ�߶�\r\n        jumpHeight: 0,\r\n        // ������Ծ����ʱ��\r\n        jumpDuration: 0,\r\n        // ���̰��º����ӵ���Ծ�߶�\r\n        height: 0,\r\n        //���̰��º����ӵ���Ծ����ʱ��\r\n        duration: 0,\r\n        //Ϊ��������Ծ�˶������ᣬ����ʱ�䱶��\r\n        mutiplynum: 0,\r\n        //��Ծ����\r\n        jumpAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n    },\r\n\r\n    playJumpSound: function () {\r\n        // �����������沥������\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n\r\n    setJumpAction: function () {\r\n        // ������Ծ����\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        // ��Ծ����\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        // ����\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        // �����ظ�\r\n        return cc.repeatForever(cc.sequence(callback, jumpUp, jumpDown));\r\n    },\r\n\r\n    setOneJumpAction: function () {\r\n        // ������Ծ����\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        // ��Ծ����\r\n        var jumpUp = cc.moveBy(this.duration, cc.v2(0, this.height)).easing(cc.easeCubicActionOut());\r\n        // ����\r\n        var jumpDown = cc.moveBy(this.duration, cc.v2(0, -this.height)).easing(cc.easeCubicActionOut());\r\n        this.timer = 0;\r\n        //����\r\n        return cc.sequence(callback, jumpUp, jumpDown);\r\n    },\r\n\r\n    clickJump (event) {\r\n        //��ֹ�������������������\r\n        if (this.flag == false && this.timer < this.duration * this.mutiplynum - this.timer) {\r\n            this.node.pauseSystemEvents();\r\n            this.scheduleOnce(function () {\r\n                this.node.resumeSystemEvents();\r\n            }, (this.duration * this.mutiplynum - this.timer));\r\n        }\r\n        else {\r\n            this.flag = false;\r\n            //ͣ��ԭ�ȵĶ���\r\n            this.node.stopAllActions();\r\n            this.node.setPosition(-340, -230);\r\n            //��ʼ�¶���\r\n            this.node.runAction(this.setOneJumpAction());\r\n            //����released���ȴ�onKeyDown���������󣬻ָ�ԭ�ȶ���\r\n            this.scheduleOnce(function () {\r\n                this.node.stopAllActions();\r\n                this.node.setPosition(-340, -230);\r\n                this.node.runAction(this.setJumpAction());\r\n                this.flag = true;\r\n            }, (this.duration * this.mutiplynum - this.timer));\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        //��ʱ��\r\n        this.timer = 0;\r\n        this.flag = true;\r\n\r\n        // ��ʼ����Ծ����\r\n        this.node.runAction(this.setJumpAction());\r\n\r\n        // ��ʼ�������������\r\n        this.node.on('mousedown', this.clickJump , this);\r\n    },\r\n\r\n    onDestroy() {\r\n        this.node.off('mousedown', this.clickJump, this);\r\n    }\r\n\r\n});\r\n"]}